version: v1.0
name: Python example
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: "JUPYTER NOTEBOOK TESTS: Ubuntu Linux Xenial CPython 2.7 (Python 2.7 + latest stable SymPy)"
    task:
      jobs:
        - name: "JUPYTER NOTEBOOK TESTS: Ubuntu Linux Xenial CPython 2.7 (Python 2.7 + latest stable SymPy)"
          commands:
            - sudo apt-get update
            - sudo apt-get -y install texlive-latex-base pandoc colordiff
            - export PATH=$PATH:/home/semaphore/.local/bin
            - pip install -U pip setuptools
            - pip install testfixtures sympy mpmath jupyter matplotlib scipy
            - git clone https://github.com/zachetienne/nrpytutorial.git
            - cd nrpytutorial
            - ./UnitTesting/core_Jupyter_notebook_testsuite.sh
  - name: "SymPy1.3, Ubuntu Linux Bionic Python 2.7.18 (earliest versions supported by UnitTests)"
    task:
      jobs:
        - name: "SymPy1.3, Ubuntu Linux Bionic Python 2.7.18 (earliest versions supported by UnitTests)"
          commands:
            - pip install -U pip setuptools
            - pip install sympy==1.3 mpmath testfixtures
            - git clone https://github.com/zachetienne/nrpytutorial.git
            - cd nrpytutorial
            - ./UnitTesting/run_NRPy_UnitTests.sh python2
